<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<!--
<link rel="shortcut icon" href="icon72.png" />
<link rel="apple-touch-icon" href="icon.png" />
<link rel="manifest" href="manifest.webmanifest" />
-->
<title>WinPNG 뷰어</title>
<script src="../view/lib/Subtitle.Converter.js" type="module"></script>
<script src="lib/jszip.min.js" type="module"></script>
<script src="lib/WinPNG.js" type="module"></script>
<script>
{
	const userAgent = clientInformation.userAgent.toLowerCase();
	const redirect = (() => {
		let url = location.href;
		if (location.search.length) {
			const params = location.search.substring(1).split("&");
			for (let i = 0; i < params.length; i++) {
				if (params[i].startsWith("ref") && document.referrer) {
					url = url.split("?")[0] + "?url=" + encodeURIComponent(document.referrer);
					break;
				}
			}
		}
		
		if (userAgent.indexOf("kakao") > 0) {
			return "kakaotalk://web/openExternal?url=" + encodeURIComponent(url);
			
		} else if (userAgent.indexOf("android") > 0) {
			let and = false;
			if (userAgent.startsWith("tistory/")) {
				and = true;
			} else if (userAgent.indexOf("naver") > 0) {
				and = true;
			}
			if (!and && clientInformation.userAgentData && clientInformation.userAgentData.brands) {
				clientInformation.userAgentData.brands.forEach((brand) => {
				    if (brand.brand == "Android WebView") {
				    	and = true;
				    }
				});
			}
			if (and) {
				alert("인앱 브라우저에선\n정상적인 이용이 어렵습니다.");
				return "intent://" + url.replace(/https?:\/\//i, "") + "#Intent;scheme=https;package=com.android.chrome;end";
			} else {
				return null;
			}
		}
		return null;
	})();
	if (redirect) {
		//alert("다음 URL을 실행합니다.\n" + redirect);
		location.href = redirect;
		history.back();
	}
}
URL.files = {};
URL.from = function(blob) {
	const url = URL.createObjectURL(blob);
	this.files[url] = blob;
	return url;
}
URL.clear = function(required) {
	for (let url in this.files) {
		if (url == required) continue;
		URL.revokeObjectURL(url);
		delete this.files[url];
	}
}
URL.reset = function(blob) {
	this.clear();
	return this.from(blob);
}
</script>
<script>
let inputUrl;
let ivTarget;
let cbJamaker;
let viewFileList;
let preview;
let popup;
let popupUrl;

const input = new Image();
input.crossorigin = "anonymous";
const canvas = document.createElement("canvas");
input.onload = async function() {
	try {
		if (popup && popup.window) {
			document.getElementsByTagName("iframe")[0].src = popupUrl;
			popup.close();
		} else {
			document.body.className = "";
		}
		
		viewFileList.innerHTML = "";
		viewFileList.style.minWidth = "";
		
		const bmp = new BufferedImage(this);
		const possibility = WithTarget.possibility(bmp);
		let parsed = await WithTarget.fromBitmap(bmp, possibility);
		
		if (!parsed) {
			// 키값 입력받아서 재시도
			const key = prompt("이미지를 해석할 수 없습니다.\n비밀번호가 있다면 키를 입력하세요.");
			parsed = await WithTarget.fromBitmap(bmp, possibility, getShift(key), getXors(key));
			
			if (!parsed) {
				showTargetImage(bmp);
				setTimeout(() => {
					alert("해석 실패");
				}, 100);
				files = oldFiles;
				return;
			}
		}
		
		preview.style.display = "";
		showTargetImage(parsed.targetImage);
		
		parsed.containers.sort((cont1, cont2) => {
			return compare(cont1.path, cont2.path);
		});
		for (let cont of parsed.containers) {
			await addFile(cont);
		}
		
		let minWidth = 0;
		[...viewFileList.children].forEach((a) => {
			let aWidth = 3;
			a.childNodes.forEach((span) => {
				aWidth += span.getBoundingClientRect().width;
			});
			minWidth = Math.max(minWidth, aWidth);
		});
		viewFileList.style.minWidth = minWidth + "px";
		
	} catch (e) {
		console.error(e);
		if (e.message.indexOf("cross-origin") > 0) {
			loadExternal(inputUrl.value);
		}
	}
}
input.onerror = function(err) {
	loadExternal(inputUrl.value);
}
async function unzip(zipFile) {
	try {
		if (popup && popup.window) {
			document.getElementsByTagName("iframe")[0].src = popupUrl;
			popup.close();
		} else {
			document.body.className = "";
		}
		
		viewFileList.innerHTML = "";
		viewFileList.style.minWidth = "";
		
		const zip = await JSZip.loadAsync(zipFile);
		for (key in zip.files) {
			const file = zip.files[key];
			if (file.dir) continue;
			
			await addFile({ path: file.name, binary: await file.async("uint8array") });
		}
		
		let minWidth = 0;
		[...viewFileList.children].forEach((a) => {
			let aWidth = 3;
			a.childNodes.forEach((span) => {
				aWidth += span.getBoundingClientRect().width;
			});
			minWidth = Math.max(minWidth, aWidth);
		});
		viewFileList.style.minWidth = minWidth + "px";
		
	} catch (e) {
		console.error(e);
	}
}
function loadExternal(url) {
	if (url.startsWith("blob:")) {
		alert("열 수 없는 경로입니다.");
		return;
	}
	if (window.innerWidth > 800) { // PC
		popup = window.open(popupUrl = url, "left", "location=no"
				+ ",top=" + window.screenTop
				+ ",left=" + window.screenLeft
				+ ",width=" + ( (window.innerWidth > 1200)
				              ? ( (window.innerWidth > 1600)
				                ? (window.innerWidth - 800)
				                : (window.innerWidth / 2)
				                )
				              : (window.innerWidth - 600))
				+ ",height=" + (window.outerHeight - 74));
		if (popup) {
			document.body.className = "withPopup";
			inputUrl.value = "외부 이미지를 팝업창에서 드래그해서 가져오세요.";
		} else {
			alert("팝업이 차단됐습니다.");
		}
		
	} else { // Mobile
		document.body.className = "withExternal";
		document.getElementsByTagName("iframe")[0].src = inputUrl.value;
	}
	history.replaceState({}, null, window.location.pathname + "?url=" + encodeURIComponent(url));
}
function compare(path1, path2) {
	const index1 = path1.indexOf("/");
	const index2 = path2.indexOf("/");
	if (index1 < 0) {
		if (index2 < 0) {
			// 파일끼리 대소문자 무시하고 비교
			return (path1.toUpperCase() < path2.toUpperCase()) ? -1 : 1;
		} else {
			// Java 버전과 달리 폴더보다 파일이 먼저 보이게 함
			return -1;
		}
	} else {
		if (index2 < 0) {
			// Java 버전과 달리 폴더보다 파일이 먼저 보이게 함
			return 1;
		} else {
			const dir1 = path1.substring(0, index1);
			const dir2 = path2.substring(0, index2);
			if (dir1 == dir2) {
				// 같은 폴더면 하위 내용물 비교
				return compare(path1.substring(index1 + 1), path2.substring(index2 + 1));
			} else {
				// 폴더끼리 대소문자 무시하고 비교
				return (dir1.toUpperCase() < dir2.toUpperCase()) ? -1 : 1;
			}
		}
	}
}
async function addFile(cont) {
	const areaSettingZip = document.getElementById("areaSettingZip");
	areaSettingZip.style.display = "none";
	
	const path = cont.path.split("/");
	const filename = path[path.length - 1];
	
	const a = document.createElement("a");
	
	const labelDir = document.createElement("span");
	labelDir.innerText = cont.path.substring(0, cont.path.lastIndexOf('/') + 1);
	
	const labelFile = document.createElement("span");
	labelFile.className = "file";
	const file = new File([cont.binary], filename);
	a.setAttribute("data-href", a.href = URL.from(file));
	a.download = labelFile.innerText = filename;
	
	a.append(labelDir);
	a.append(labelFile);
	viewFileList.append(a);
	
	let type = "";
	const extIndex = filename.lastIndexOf(".") + 1;
	const ext = filename.substring(extIndex).toLowerCase();
	switch (ext) {
		case "png":
		case "bmp":
		case "gif":
		case "jpg":
		case "jpeg":
		case "exif":
		case "tiff":
		case "ico":
		case "cur":
		case "svg":
		case "svgz":
		case "webp":
			a.className = (type = "image");
			break;
		case "smi":
		case "sami": {
			// Jamaker 주석 제거 기능
			let text = await file.text();
			text = text.split("\n</SAMI>")[0] + "\n</SAMI>";
			{	const parts = text.split("\n<!-- End=");
				for (let i = 1; i < parts.length; i++) {
					parts[i] = parts[i].split("-->").slice(1).join("-->");
				}
				text = parts.join("");
			}
			{	const parts = text.split("\n<!-- ASS");
				for (let i = 1; i < parts.length; i++) {
					parts[i] = parts[i].split("-->").slice(1).join("-->");
				}
				text = parts.join("");
			}
			const clearedFile = new File([new Blob(["\uFEFF" + text], { type: "text/plain;charset=utf-8" })], filename);
			const clearedUrl = URL.from(clearedFile);
			a.setAttribute("data-cleared", clearedUrl);
			
			if (cbJamaker.checked) {
				a.href = clearedUrl;
			}
		}
		case "jmk": {
			// jmk/smi -> smi/ass/srt 변환 기능
			const holds = SmiFile.textToHolds(await file.text());
			if (holds[0].fs) {
				const match = /<sami( [^>]*)*>/gi.exec(holds[0].text);
				
				let withSmi = false;
				let withSrt = false;
				let withAss = false;
				
				if (match && match[1]) {
					const attrs = match[1].toUpperCase().split(" ");
					attrs.forEach((attr) => {
						if (attr == "SMI") {
							withSmi = true;
						} else if (attr == "SRT") {
							withSrt = true;
						} else if (attr == "ASS") {
							withAss = true;
						}
					});
				}

				Subtitle.video.fs  = holds[0].fs;
				Subtitle.video.kfs = holds[0].kfs ?? [];
				
				if (withSmi) {
					const smiFilename = filename.substring(0, extIndex) + "smi";
					const smiText = SmiFile.holdsToText(holds, true, true, -1);
					const smiFile = new File([new Blob(["\uFEFF" + smiText], { type: "text/plain;charset=utf-8" })], smiFilename);
					const smiUrl = URL.from(smiFile);
					a.setAttribute("data-smi", smiUrl);
					
					const smiA = document.createElement("a");
					smiA.href = smiUrl;
					smiA.download = smiFilename;
					smiA.innerText = "[SMI] ";
					labelFile.before(smiA);
				}
				if (withAss) {
					const append = new AssFile(holds[0].ass ?? "");
					const appendParts = [];
					append.parts.forEach((part) => {
						switch (part.name) {
							case "Script Info":
							case "V4+ Styles":
							case "Events":
								break;
							default: {
								appendParts.push(part);
							}
						}
					});
					let x = 1920;
					let y = 1080;
					const info = append.getInfo();
					if (info) {
						let playResX = info.get("PlayResX");
						let playResY = info.get("PlayResY");
						if (playResX && playResY) {
							x = playResX;
							y = playResY;
						}
					}
					holds.forEach((hold) => {
						hold.smiFile = new SmiFile(hold.text);
					});
					const assFilename = filename.substring(0, extIndex) + "ass";
					const assText = SmiFile.holdsToAss(holds, appendParts, append.getStyles().body, append.getEvents().body, x, y).toText();
					const assFile = new File([new Blob(["\uFEFF" + assText], { type: "text/plain;charset=utf-8" })], assFilename);
					const assUrl = URL.from(assFile);
					a.setAttribute("data-ass", assUrl);
					
					const assA = document.createElement("a");
					assA.href = assUrl;
					assA.download = assFilename;
					assA.innerText = "[ASS] ";
					labelFile.before(assA);
				}
				if (ext == "jmk" && (withSmi || withAss)) {
					// JMK 원본 다운로드는 ZIP 다운로드에서만 제공
					a.removeAttribute("href");
				}
				if (withSmi || withAss) {
					areaSettingZip.style.display = "block";
				}
			}
		}
		case "srt":
		case "ass":
		case "txt":
		case "xml":
		case "html":
		case "js":
		case "css":
		case "ts":
		case "json":
		case "java":
		case "cs":
		case "cpp":
		case "jsp":
		case "asp":
		case "php":
		case "bat":
		case "sh":
		case "log":
			a.className = (type = "text");
			break;
	}
	
	if (type) {
		const labelPreview = document.createElement("span");
		labelPreview.className = "preview";
		labelPreview.innerText = "[미리보기]";
		a.append(labelPreview);
	}
}
function showTargetImage(bmp) {
	ivTarget.innerHTML = "";
	if (bmp == null) {
		const comment = document.createElement("div");
		comment.id = "comment";
		comment.append("입력 이미지 없이 생성한");
		comment.append(document.createElement("br"));
		comment.append("이미지입니다.");
		ivTarget.append(comment);
		return;
	}
	ivTarget.append(bmp.update().canvas);
	let height = ivTarget.clientHeight;
	let ratio = height / bmp.height;
	let width = bmp.width * ratio;
	if (width > ivTarget.clientWidth) {
		width = ivTarget.clientWidth;
		ratio = width / bmp.width;
		height = bmp.height * ratio;
	}
	bmp.canvas.style.width = width + "px";
	bmp.canvas.style.height = height + "px";
	bmp.canvas.style.margin = (-height / 2) + "px " + (-width / 2) + "px";
}
function downloadZip() {
	const as = [...document.getElementById("viewFileList").children];
	if (!as.length) {
		alert("PNG 파일을 열지 않았습니다.");
		return;
	}
	
	const priority = document.querySelector("form").priority.value;
	
	const zip = new JSZip();
	as.forEach((a) => {
		const spans = a.children;
		let name = a.querySelector("span").innerText + a.querySelector("span.file").innerText;
		
		let completed = false;
		const extIndex = name.lastIndexOf(".") + 1;
		const ext = name.substring(extIndex).toLowerCase();
		if (ext == "jmk") {
			if (priority == "smi" || priority == "all") {
				const href = a.getAttribute("data-smi");
				if (href) {
					// 우선순위 SMI 변환 존재
					zip.file(name.substring(0, extIndex) + "smi", URL.files[href]);
					completed = (priority == "smi");
				} else if (priority == "smi") {
					// 우선순위 SMI 변환 없는데 ASS 변환 있으면 대체재로 넣음
					const href = a.getAttribute("data-ass");
					if (href) {
						zip.file(name.substring(0, extIndex) + "ass", URL.files[href]);
						completed = true;
					}
				}
			}
			if (!completed && (priority == "ass" || priority == "all")) {
				const href = a.getAttribute("data-ass");
				if (href) {
					// 우선순위 ASS 변환 존재
					zip.file(name.substring(0, extIndex) + "ass", URL.files[href]);
					completed = (priority == "ass");
				} else if (priority == "ass") {
					// 우선순위 ASS 변환 없는데 SMI 변환 있으면 대체재로 넣음
					const href = a.getAttribute("data-smi");
					if (href) {
						zip.file(name.substring(0, extIndex) + "smi", URL.files[href]);
						completed = true;
					}
				}
			}
		} else if (ext == "smi") {
			if (priority == "ass" || priority == "all") {
				const href = a.getAttribute("data-ass");
				if (href) {
					// 우선순위 ASS 변환 존재
					zip.file(name.substring(0, extIndex) + "ass", URL.files[href]);
					completed = (priority == "ass");
				}
			}
		}
		if (!completed) {
			let href = a.href;
			if (!href) href = a.getAttribute("data-href");
			if (href) zip.file(name, URL.files[href]);
		}
	});
	zip.generateAsync({ type: "blob" }).then((blob) => {
		const a = document.createElement("a");
		a.href = URL.createObjectURL(blob);
		a.download = "WinPNG_" + new Date().getTime() + ".zip";
		a.click();
		a.remove();
	});
}

function parse() {
	try {
		const url = inputUrl.value;
		URL.clear(url.startsWith("blob:") ? url : null);
		input.src = url;
	} catch (e) {
		console.debug(e);
	}
	return false;
}
async function paste(e) {
	if (e.clipboardData.files.length) {
		e.preventDefault();
		inputUrl.value = input.src = URL.reset(e.clipboardData.files[0]);
	} else {
		inputUrl.value = "";
		inputUrl.focus();
	}
}

async function onload() {
	inputUrl = document.getElementById("inputUrl");
	ivTarget = document.getElementById("ivTarget");
	viewFileList = document.getElementById("viewFileList");
	preview = document.getElementById("preview");
	
	// 포커스 상관없이 붙여넣기 이벤트 동작
	document.addEventListener("paste", paste);
	
	{	// 파일 열기
		const inputFile = document.createElement("input");
		inputFile.type = "file";
		inputFile.addEventListener("change", (e) => {
			if (inputFile.files.length) {
				inputUrl.value = input.src = URL.reset(inputFile.files[0]);
				inputFile.value = "";
			}
		});
		document.getElementById("btnOpenFile").addEventListener("click", async () => {
			inputFile.click();
		});
	}
	
	{	// 이미지 드래그해서 열기
		const cover = document.createElement("div");
		document.body.append(cover);
		cover.style.position = "fixed";
		cover.style.top = 0;
		cover.style.left = 0;
		cover.style.right = 0;
		cover.style.bottom = 0;
		cover.style.background = "rgba(127,127,127,0.1)";
		cover.style.display = "none";
		
		document.addEventListener("dragenter", (e) => {
			e.preventDefault();
			cover.style.display = "";
		});
		cover.addEventListener("dragleave", (e) => {
			e.preventDefault();
			cover.style.display = "none";
		});
		cover.addEventListener("dragover", (e) => {
			e.preventDefault();
		});
		cover.addEventListener("drop", async (e) => {
			e.preventDefault();
			cover.style.display = "none";
			if (e.dataTransfer) {
				if (e.dataTransfer.files && e.dataTransfer.files.length) {
					const file = e.dataTransfer.files[0];
					const ext = file.name.substring(file.name.length - 4);
					switch (ext.toLowerCase()) {
						case ".png":
						case ".bmp": {
							inputUrl.value = input.src = URL.reset(file);
							break;
						}
						case ".zip": {
							ivTarget.innerHTML = "";
							const comment = document.createElement("div");
							comment.id = "comment";
							comment.append("ZIP 파일입니다.");
							ivTarget.append(comment);
							inputUrl.value = URL.reset(file);
							unzip(file);
						}
					}
				} else if (e.dataTransfer.items && e.dataTransfer.items.length) {
					let urlItem = null;
					for (let i = 0; i < e.dataTransfer.items.length; i++) {
						const item = e.dataTransfer.items[i];
						if (item.kind == "string" && item.type == "text/uri-list") {
							urlItem = item;
						}
					}
					if (urlItem) {
						urlItem.getAsString(async (url) => {
							try {
								const response = await fetch(url);
								const file = await response.blob();
								
								switch (file.type) {
									case "image/png":
									case "image/bmp": {
										inputUrl.value = input.src = URL.reset(file);
										break;
									}
									case "application/zip":
									case "application/octet-stream": {
										ivTarget.innerHTML = "";
										const comment = document.createElement("div");
										comment.id = "comment";
										comment.append("ZIP 파일입니다.");
										ivTarget.append(comment);
										inputUrl.value = URL.reset(file);
										unzip(file);
									}
								}
								
							} catch (e) {
								console.log(e);
							}
						});
						
					} else {
						alert("이미지 드래그가 지원되지 않는 환경입니다.\n이미지 복사-붙여넣기로 시도하시기 바랍니다.");
					}
				}
			}
		});
		cover.addEventListener("click", (e) => {
			e.preventDefault();
			cover.style.display = "none";
		});
	}
	
	{	// 미리보기
		function addEL(els, en, selector, handler) {
			if (!Array.isArray(els)) {
				els = [els];
			}
			els.forEach((el) => {
				const wrapperHandler = handler
				?	(e) => {
						if (!e.target) return;
						const child = e.target.closest(selector);
						if (child) {
							handler.call(child, e);
						}
					}
				:	(e) => {
						selector.call(el, e);
					}
				;
				en.replace(" ", ",").split(",").forEach((e) => {
					el.addEventListener(e.trim(), wrapperHandler);
				});
			});
		}
		const previewContent = document.getElementById("previewContent");
		addEL(viewFileList, "click", "span.preview", async (e) => {
			e.preventDefault();
			
			let url = e.srcElement.parentElement.href;
			if (!url) { // JMK 파일 링크 제거한 경우
				url = e.srcElement.parentElement.getAttribute("data-href");
			}
			
			previewContent.innerHTML = "";
			switch (e.srcElement.parentElement.className) {
				case "text": {
					previewContent.innerText = await URL.files[url].text();
					preview.style.display = "block";
					break;
				}
				case"image": {
					const img = new Image();
					img.src = url;
					previewContent.append(img);
					preview.style.display = "block";
				}
			}
			previewContent.scrollTo(0,0);
		});
		document.getElementById("btnClosePreview").addEventListener("click", (e) => {
			preview.style.display = "";
		});
		document.addEventListener("keydown", (e) => {
			if (e.keyCode == 27) { // ESC
				preview.style.display = "";
			}
		});
		
		const form = document.querySelector("form");
		cbJamaker = document.getElementById("cbJamaker");
		form.addEventListener("click", (e) => {
			if (e.target.closest("#cbJamaker")) {
				if (cbJamaker.checked) {
					[...viewFileList.children].forEach((a) => {
						if (!a.download.endsWith(".smi")) return;
						const cleared = a.getAttribute("data-cleared");
						if (cleared) {
							a.href = cleared;
						}
					});
				} else {
					[...viewFileList.children].forEach((a) => {
						if (!a.download.endsWith(".smi")) return;
						a.href = a.getAttribute("data-href");
					});
				}
				document.cookie = "cbJamaker=" + cbJamaker.checked;
				
			} else if (e.target.closest("input[name=priority]")) {
				document.cookie = "priority=" + form.priority.value;
			}
		});
		
		document.cookie.split(";").forEach((cookie) => {
			cookie = cookie.trim().split("=");
			if (cookie[0] == "cbJamaker") {
				cbJamaker.checked = (cookie[1] == "true");
			} else if (cookie[0] == "priority") {
				form.priority.value = cookie[1];
			}
		});
	}
	
	if (location.search.length) {
		const params = location.search.substring(1).split("&");
		for (let i = 0; i < params.length; i++) {
			if (params[i].startsWith("url=")) {
				inputUrl.value = decodeURIComponent(params[i].substring(4));
				parse();
				break;
			}
			if (params[i].startsWith("ref") && document.referrer) {
				inputUrl.value = document.referrer;
				parse();
				break;
			}
		}
	}
}
</script>
<style>
* {
	margin: 0;
	padding: 0;
	box-sizing: border-box;
	white-space: nowrap;
}
html, body {
	width: 100%;
	height: 100%;
	overflow: hidden;
}
#externalFrame {
	width: 100%;
	height: 60%;
	display: none;
}
#externalFrame > div {
	border: 1px solid #000;
	border-width: 1px 0;
	line-height: 19px;
}
iframe {
	width: 100%;
	height: calc(100% - 40px);
	border: 0;
}
form {
	margin: 0 auto;
	width: 100%;
	max-width: 800px;
	height: 100%;
}

body.withExternal #externalFrame { display: block; }
body.withExternal form { height: 40%; }

body.withPopup #externalFrame {
	display: block;
	float: left;
	width: calc(100% - 800px);
	height: 100%;
}
body.withPopup #externalFrame > div {
	display: none;
}
body.withPopup #externalFrame iframe {
	height: 100%;
}
body.withImage #externalFrame iframe { display: none; }
body.withImage #externalFrame span   { display: block; }
body.withImage #externalFrame img    { display: initial; }
body.withPopup form,
body.withImage form {
	float: right;
	width: 800px;
}
@media (max-width:1600px) { body.withPopup #externalFrame { width: 50%;                } body.withPopup form, body.withImage form { width: 50%;   } }
@media (max-width:1200px) { body.withPopup #externalFrame { width: calc(100% - 600px); } body.withPopup form, body.withImage form { width: 600px; } }

#winpng {
	height: 20px;
	text-align: right;
}
fieldset {
	height: 40px;
	background: #eee;
	border: 0;
	line-height: 30px;
	padding: 5px;
}
fieldset * {
	display: block;
	float: left;
	height: 30px;
	border: 0;
	line-height: 30px;
}
fieldset label {
	width: 40px;
}
fieldset input,
fieldset button {
	border: 1px solid #aaa;
}
fieldset input {
	width: calc(100% - 185px);
	padding: 0 5px;
	background: #fff;
	border-right: 0;
	border-radius: 10px 0 0 10px;
}
fieldset button {
	width: 60px;
	background: #ddd; 
	border-radius: 10px;
}
fieldset button[type=submit] {
	border-left: 0;
	border-radius: 0 10px 10px 0;
}
#btnOpenFile {
	margin-left: 5px;
	width: 80px;
}
#ivTarget {
	position: relative;
	background: #bbb;
	height: 200px;
}
#ivTarget > * {
	position: absolute;
	top: 50%;
	left: 50%;
}
#comment {
	width: 200px;;
	margin: -24px -100px;
	line-height: 24px;
	text-align: center;
}
#areaSettingZip {
    position: relative;
    margin-top: -24px;
    text-align: right;
    display: none;
}
#areaSetting {
	width: 100%;
	height: 30px;
	line-height: 30px;
	background: linear-gradient(#fff, #eee);
    border-bottom: 1px solid #ccc;
}
#areaSetting a {
    display: block;
    float: right;
    inset: auto 4px 4px auto;
}
#areaFileList {
	width: 100%;
	height: calc(100% - 290px);
	overflow: auto;
	background: #eee;
}
#viewFileList > a {
	display: block;
	padding-left: 2px;
	line-height: 40px;
	text-decoration: none;
	color: #000;
	background: linear-gradient(#fff, #eee);
	border-bottom: 1px solid #ccc;
}
#viewFileList > a:hover {
	background: linear-gradient(#cef, #bde);
}
#viewFileList > a > span {
	color: #aaa;
}
#viewFileList > a > span.file {
	color: #038;
	text-decoration: underline;
	padding-left: 24px;
    background-repeat: no-repeat;
    background-position: 2px 2px;
    background-image: url("data:image/png;base64,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");
}
#viewFileList > a.text > span.file {
	background-image: url("data:image/png;base64,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");
}
#viewFileList > a.image > span.file {
	background-image: url("data:image/png;base64,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");
}
#viewFileList > a > span.preview {
	float: right;
	color: #666;
	padding: 0 10px;
	cursor: pointer;
}
#preview {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	bottom: 0;
	background: rgba(127, 127, 127, 0.1);
	display: none;
}
#previewWindow {
	margin: 10px auto;
	width: calc(100% - 20px);
	max-width: 780px;
	height: calc(100% - 20px);
	border: 1px solid #000;
	border-radius: 10px;
	background: #fff;
	padding: 10px;
}
#previewContent {
	width: 100%;
	height: 100%;
	overflow: auto;
	white-space: pre;
}
#btnClosePreview {
	position: fixed;
	top: 10px;
	right: calc(50% - 390px);
	width: 50px;
	height: 50px;
	border: 0;
	background: transparent;
	font-size: 40px;
	cursor: pointer;
}
@media (max-width: 800px) {
	#btnClosePreview {
		right: 10px;
	}
}
</style>
</head>
<body onload="onload();" onbeforeunload="if(popup)popup.close();">
<div id="externalFrame"><iframe></iframe><div>↑ 이미지 길게 터치 후 복사<br />↓ URL란에 길게 터치 후 붙여넣기</div></div>
<form onsubmit="return parse();">
	<div id="winpng">
		<a href="https://github.com/harnenim/WinPNG">[WinPNG 알아보기]</a>
	</div>
	<fieldset>
		<label for="inputUrl">URL:</label>
		<input type="text" id="inputUrl" autocomplete="off" />
		<button type="submit">열기</button>
		<button type="button" id="btnOpenFile">파일 열기</button>
	</fieldset>
	<div id="ivTarget">
		<div id="comment">이미지를 드래그하거나<br />Ctrl+V 하셔도 됩니다.</div>
	</div>
	<div id="areaSettingZip" title="ZIP 파일에 포함할 파일 우선순위">
		우선순위
		<label><input type="radio" name="priority" value="all" checked />모두</label>
		<label><input type="radio" name="priority" value="smi" />SMI</label>
		<label><input type="radio" name="priority" value="ass" />ASS</label>
	</div>
	<div id="areaSetting">
		<label title="MPC-HC, VLC 등 smi 파일의 주석이 노출되는 플레이어를 이용하는 경우에 필요합니다."><input type="checkbox" id="cbJamaker"> .smi 내 Jamaker용 주석 제거</label>
		<a href="javascript:downloadZip()">[ZIP으로 받기]</a>
	</div>
	<div id="areaFileList">
		<div id="viewFileList"></div>
	</div>
	<div id="preview">
		<div id="previewWindow">
			<div id="previewContent"></div>
			<button type="button" id="btnClosePreview">×</button>
		</div>
	</div>
</form>
</body>

</html>
